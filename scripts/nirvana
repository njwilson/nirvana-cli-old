#!/usr/bin/env python

import sys
from nirvana.rest_client import RestClient

if __name__ == '__main__':
    # Usage: nirvana <username> <md5 of password>
    print "Authenticating..."
    client = RestClient()
    request, results = client.api_auth_new(sys.argv[1], sys.argv[2])
    client.auth_token = results[0]['auth']['token']

    print "Getting all data..."
    everything = client.api_everything()[1]

    for result in everything:
        if 'user' in result:
            first = result['user']['firstname']
            last = result['user']['lastname']
            print "Got everything for {0} {1}!".format(first, last)
            break
